<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png" />
    <link rel="icon" type="image/png" href="wiz_assets/img/favicon.png" />
    <title>Nomination Capture</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <!-- CSS Files -->
    <link href="wiz_assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="wiz_assets/css/paper-bootstrap-wizard.css" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="wiz_assets/css/demo.css" rel="stylesheet" />
    <!-- Fonts and Icons -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
    <link href="wiz_assets/css/themify-icons.css" rel="stylesheet">

    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.9/css/bootstrap-dialog.min.css" rel="stylesheet" type="text/css" />
    <!--<style>
        img {
            object-fit: cover;
            border-radius: 50%;
            width: 150px;
            height: 150px;
        }
    </style>-->

    <!--<style>
        #notifications {
            cursor: pointer;
            position: fixed;
            right: 0px;
            z-index: 9999;
            bottom: 0px;
            margin-bottom: 22px;
            margin-right: 15px;
            max-width: 300px;
        }

        .container {
            margin-top: 150px;
        }
    </style>-->
</head>
<body>
    <!--<div class="image-container set-full-height">-->
    <!--style="background-image: url('wiz_assets/img/HollardValues.jpg')">-->


    
        <div class="wrapper ">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">

                        <div class="container">

                            <div class="card wizard-card" data-color="red" id="wizard">
                                <!--<a href="http://63.33.65.125/" class="profile-photo dropdown-toggle nav-link" target="_blank">
                                    <div class="profile-photo-small">
                                        <img src="./assets/img/faces/avatar.jpg" alt="Circle Image" class="rounded-circle img-fluid">
                                    </div>
                                </a>-->
                                <!--<a href="http://63.33.65.125/" target="_blank">
                                    <div class="logo">
                                            <img src="assets/img/new_logo.png">
                                    </div>
                                </a>-->
                                <div class="col-sm-5" onclick="showdiv()" style="z-index:1000">
                                    <div class="logo">
                                        <img src="assets/img/logo1.png">
                                    </div>
                                   
                                
                                </div>
                                <div class="col-sm-7">
                                    <img src="assets/img/shoutTrophy.png">
                                </div>

                                    <!--red is know gold-->
                                    <form action="" method="">
                                        <!--        You can switch " data-color="azure" "  with one of the next bright colors: "blue", "green", "orange", "red"           -->
                                        <div class="wizard-header">
                                            <h3 class="wizard-title">#ShoutOut</h3>
                                            <p class="category">The smallest thanks is always worth more than the effort it takes to give it</p>
                                        </div>
                                        <div class="wizard-navigation">
                                            <div class="progress-with-circle">
                                                <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="3" style="width: 21%;"></div>
                                            </div>
                                            <ul>
                                                <li>
                                                    <a href="#details" data-toggle="tab">
                                                        <div class="icon-circle">
                                                            <i class="ti-list"></i>
                                                        </div>
                                                        <h6>Hollardite</h6>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="#hollardWay" data-toggle="tab">
                                                        <div class="icon-circle">
                                                            <i class="ti-pencil"></i>
                                                        </div>
                                                        <h6>Write Up</h6>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="tab-content">
                                            <div class="tab-pane" id="details">
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <p class="category">Let's start with the hollardite's details:</p>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <h6>Nominee Name</h6>
                                                            <select class="form-control" id="HolUserNames"></select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12" id="infoCard">
                                                        <div class="card ">
                                                            <div class="card-body">
                                                                <h4 class="card-title">Hollardite Info</h4>
                                                                <p class="text-primary" id="branch"></p>
                                                                <p class="text-primary" id="department"></p>
                                                                <p class="text-primary" id="email"></p>
                                                                <p class="text-primary" id="skills"></p>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div class="stats">

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <!--<div class="tab-pane" id="captain">
                <h5 class="info-text">Which Hollard Way Values Uphold </h5>
                <div class="row">
                    <div class="col-sm-14 ">
                        <div class="col-sm-2">
                            <div class="choice" data-toggle="wizard-checkbox" id="CE">
                                <input type="checkbox" name="ce" id="ceChK">
                                <div class="card card-checkboxes card-hover-effect">
                                    <i class="ti-star"></i>
                                    <p>Choose Excellence</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="choice" data-toggle="wizard-checkbox" id="DCP">
                                <input type="checkbox" name="dcp" id="dcpChk">
                                <div class="card card-checkboxes card-hover-effect">
                                    <i class="ti-truck"></i>
                                    <p>Deliver For Customers And Partners</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="choice" data-toggle="wizard-checkbox" id="ImIn">
                                <input type="checkbox" name="imin" id="iminChk">
                                <div class="card card-checkboxes card-hover-effect">
                                    <i class="ti-light-bulb"></i>
                                    <p>Imagine, Innovate</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="choice" data-toggle="wizard-checkbox" id="TeamH">
                                <input type="checkbox" name="teamh" value="Design" id="teamhChk">
                                <div class="card card-checkboxes card-hover-effect">
                                    <i class="ti-pulse"></i>
                                    <p>Team Hollard</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="choice" data-toggle="wizard-checkbox" id="BRM">
                                <input type="checkbox" name="brm" id="brmChK">
                                <div class="card card-checkboxes card-hover-effect">
                                    <i class="ti-thought"></i>
                                    <p>
                                        Be Real Be Mindful
                                    </p>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>-->
                                            <div class="tab-pane" id="hollardWay">
                                                <div class="row">
                                                    <!--<div class="col-sm-12">
                        <p class="category">Please Indentify Which Hollard Ways Your Nominee Protrays</p>
                    </div>-->

                                                    <div class="col-sm-12 ">
                                                        <p class="category">Step One: Please click on the Hollard Way values thats this Hollardite has portrayed</p>
                                                        <div class="col-sm-2">
                                                            <div class="choice" data-toggle="wizard-checkbox" id="CE">
                                                                <input type="checkbox" name="ce" id="ceChK">
                                                                <div class="card card-checkboxes card-hover-effect">
                                                                    <i class="ti-star"></i>
                                                                    <h5>Choose Excellence</h5>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="choice" data-toggle="wizard-checkbox" id="DCP">
                                                                <input type="checkbox" name="dcp" id="dcpChk">
                                                                <div class="card card-checkboxes card-hover-effect">
                                                                    <i class="ti-truck"></i>
                                                                    <h5>Deliver For Customers And Partners</h5>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-2">
                                                            <div class="choice" data-toggle="wizard-checkbox" id="ImIn">
                                                                <input type="checkbox" name="imin" id="iminChk">
                                                                <div class="card card-checkboxes card-hover-effect">
                                                                    <i class="ti-light-bulb"></i>
                                                                    <h5>Imagine, Innovate</h5>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-2">
                                                            <div class="choice" data-toggle="wizard-checkbox" id="TeamH" data-toggle="tooltip" data-placement="top" title="Wana to now whats team Hollard Ask The purple Dino">
                                                                <input type="checkbox" name="teamh" value="Design" id="teamhChk">
                                                                <div class="card card-checkboxes card-hover-effect">
                                                                    <i class="ti-pulse"></i>
                                                                    <h5>Team Hollard</h5>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-2">
                                                            <div class="choice" data-toggle="wizard-checkbox" id="BRM">
                                                                <input type="checkbox" name="brm" id="brmChK">
                                                                <div class="card card-checkboxes card-hover-effect">
                                                                    <i class="ti-thought"></i>
                                                                    <h5>Be Real Be Mindful</h5>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <p class="category">Step Two: Explain how this Hollardite has lived the Hollard Way</p>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <!--<div id="txtArea_writeUp" placeholder>-->
                                                        <!--<p><strong>Write Here<strong></p>
                        <p><br></p>-->
                                                        <!--</div>-->
                                                        <div class="form-group">
                                                            <h6>Write Up</h6>
                                                            <!--<textarea id="txtEditor"></textarea>-->
                                                            <textarea class="form-control" placeholder="Please Capture Your Nomination Write Up" rows="5" id="txtArea_writeUp"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="wizard-footer">
                                            <div class="pull-right">
                                                <input type='button' class='btn btn-next btn-fill btn-primary btn-wd' name='next' value='Next' />
                                                <input type='button' class='btn btn-finish btn-fill btn-primary btn-wd' name='finish' value='Finish' id="btnFinish" />
                                            </div>
                                            <div class="pull-left">
                                                <input type='button' class='btn btn-previous btn-default btn-wd' name='previous' value='Previous' />
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </form>


                                </div>
                        </div> <!-- wizard container -->
                    </div>
                </div> <!-- row -->
            </div> <!--  big container -->
            <div class="footer">
                <div class="container text-center">

                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="valueRatingModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel"></h4>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control animated" cols="50" id="valueReason" placeholder="Enter Your Value reason" rows="5"></textarea>
                            <div class="form-group" id="rating-ability-wrapper">
                                <label class="control-label" for="rating">
                                    <span class="field-label-header">How Would You Like To Rate This Value</span><br>
                                    <!--<span class="field-label-info"></span>-->
                                    <input type="hidden" id="selected_rating" name="selected_rating" value="" required="required">
                                </label>
                                <h2 class="bold rating-header" style="">
                                    <span class="selected-rating">0</span><small> / 5</small>
                                </h2>
                                <button type="button" class="btnrating btn btn-default btn-sm" data-attr="1" id="rating-star-1">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btnrating btn btn-default btn-sm" data-attr="2" id="rating-star-2">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btnrating btn btn-default btn-sm" data-attr="3" id="rating-star-3">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btnrating btn btn-default btn-sm" data-attr="4" id="rating-star-4">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btnrating btn btn-default btn-sm" data-attr="5" id="rating-star-5">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" id="btnValueSubmit">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
</body>
<!--   Core JS Files   -->
<script src="wiz_assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
<script src="wiz_assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="wiz_assets/js/jquery.bootstrap.wizard.js" type="text/javascript"></script>
<!--  Plugin for the Wizard -->
<script src="wiz_assets/js/paper-bootstrap-wizard.js" type="text/javascript"></script>
<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
<script src="wiz_assets/js/jquery.validate.min.js" type="text/javascript"></script>
<!--<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.9/js/bootstrap-dialog.min.js"></script>

<script>

    var types = [BootstrapDialog.TYPE_DEFAULT,
    BootstrapDialog.TYPE_INFO,
    BootstrapDialog.TYPE_PRIMARY,
    BootstrapDialog.TYPE_SUCCESS,
    BootstrapDialog.TYPE_WARNING,
    BootstrapDialog.TYPE_DANGER];

    var buttons = [];





    var userData;
    var loggedInUserId = localStorage.getItem('loggedInUserId');
    var jsonNomination;

    var values;
    var value;
    var chooseExcellence1;
    var deliverForCustomersAndPartners;
    var imagineInnovate;
    var teamHollard;
    var beRealBeMindful;
    var writeUp;
    var Nomination;

    $(document).ready(function () {

        //$('#logo1').click(function (e) {
        //    window.open('http://63.33.65.125/','Purple Bot','resizable,height=500,width=370'); return false;
        //});
        //$("#logo").on('click', function () {
        //    window.open('http://63.33.65.125/', 'Purple Bot', 'resizable,height=500,width=370'); return false;
        //});
      

        //var toolbarOptions = ['bold', 'italic', 'underline', 'strike'];
        //var quill = new Quill('#txtArea_writeUp', {
        //    placeholder: 'I would like to give a #ShoutOut to...',
        //    theme: 'snow'
        //});
        init();
        //On change Employee drop
        $("#infoCard").hide();
        $("#HolUserNames").change(function () {
            var userId = $('#HolUserNames').val();
            $("#infoCard").show();
            for (let i = 0; i < userData.length; i++) {
                if (userData[i].Id == userId) {
                    $("#branch").text("Branch: " + userData[i].Province);
                    $("#department").text("Department: " + userData[i].Department);
                    $("#skills").text("Job Title: " + userData[i].JobTitle);
                    $("#email").text("Email: " + userData[i].EmailAdd);
                }
            }
        });

        //On clicks of Values
        //chooseExcellence
        $('#CE').click(function () {
            if ($(this).hasClass('active')) {
                value = "Choose Excellence";
                chooseExcellence1 = { "value": value }
            }
            else
            {
                chooseExcellence1 = { "value": undefined }
            }
        });


        // deliverForCustomersAndPartners
        $('#DCP').click(function () {
            if ($(this).hasClass('active')) {
                value = "Deliver For Customers And Partners";
                deliverForCustomersAndPartners = { "value": value }
            }
            else {
                deliverForCustomersAndPartners = { "value": undefined }
                 }
        });
        //imagineInnovate
        $('#ImIn').click(function () {
            if ($(this).hasClass('active')) {
                value = "Imagine Innovate";
                imagineInnovate = { "value": value }
            }
            else {
                imagineInnovate = { "value": undefined }
            }
        });
        //teamHollard
        $('#TeamH').click(function () {
            if ($(this).hasClass('active')) {
                value = "Team Hollard";
                teamHollard = { "value": value }
            }
            else {
                teamHollard = { "value": undefined }
            }
        });
        //beRealBeMindful
        $('#BRM').click(function () {
            if ($(this).hasClass('active')) {
                value = "Be Real Be Mindful";
                beRealBeMindful = { "value": value }
            }
            else {
                beRealBeMindful = { "value": undefined }
            }
        });


        //On Value Modal Submit button
        //$("#btnValueSubmit").on('click', (function (e) {

        //    var value = $('#myModalLabel').text();
        //    var valueReason = $('#valueReason').val();
        //    var valueRating = $('#selected_rating').val();

        //    switch (value) {
        //        case "Choose Excellence":
        //            chooseExcellence = {
        //                "value": value,
        //                "Rating": valueRating,
        //                "Reason": valueReason
        //            }
        //            break;
        //        case "Deliver For Customers And Partners":
        //                deliverForCustomersAndPartners = {
        //                    "value": value,
        //                    "Rating": valueRating,
        //                    "Reason": valueReason
        //                }
        //            break;
        //        case "Imagine Innovate":
        //                imagineInnovate = {
        //                    "value": value,
        //                    "Rating": valueRating,
        //                    "Reason": valueReason
        //                }
        //            break;
        //        case "Team Hollard":
        //                teamHollard = {
        //                    "value": value,
        //                    "Rating": valueRating,
        //                    "Reason": valueReason
        //                }
        //            break;
        //        case "Be Real Be Mindful":
        //            beRealBeMindful = {
        //                    "value": value,
        //                    "Rating": valueRating,
        //                    "Reason": valueReason
        //                }

        //        default:
        //            break;
        //    }
        //    $('#valueRatingModal').modal('hide');
        //}));

        //On Value Modal rating click
        //$(".btnrating").on('click', (function (e) {

        //    var previous_value = $("#selected_rating").val();

        //    var selected_value = $(this).attr("data-attr");
        //    $("#selected_rating").val(selected_value);

        //    $(".selected-rating").empty();
        //    $(".selected-rating").html(selected_value);

        //    for (i = 1; i <= selected_value; ++i) {
        //        $("#rating-star-" + i).toggleClass('btn-warning');
        //        $("#rating-star-" + i).toggleClass('btn-default');
        //    }

        //    for (ix = 1; ix <= previous_value; ++ix) {
        //        $("#rating-star-" + ix).toggleClass('btn-warning');
        //        $("#rating-star-" + ix).toggleClass('btn-default');
        //    }

        //}));

        //On Nomination Submit
        $("#btnFinish").on('click', (function (e) {
            //user info var declarations
            var Nominator = loggedInUserId;
            var Nominee = $('#HolUserNames').val();
            var NominationInfo;
            var Points = 0;

            //Build Values Array
            values = [];

            var ce = chooseExcellence1;
            if ( ce != undefined) {
                values.push(ce);
                Points++;
               
            }
            if ( deliverForCustomersAndPartners !== undefined) {
                values.push(deliverForCustomersAndPartners);
                Points++;
            }
            if ( imagineInnovate !== undefined) {
                values.push(imagineInnovate);
                Points++;
            }
            if (teamHollard !== undefined) {
                values.push(teamHollard);
                Points++;
            }
            if (beRealBeMindful !== undefined) {
                values.push(beRealBeMindful);
                Points++;
            }
            var writeUptxt = document.getElementById("txtArea_writeUp").value;

            var obj =
                {
                    values: values,
                    writeUp: writeUptxt
                };

            NominationInfo = JSON.stringify(obj);
            //build Nomination object
            Nomination = {
                "NominatorId": Nominator,
                "NomineeId": Nominee,
                "NominationDetails": NominationInfo,
                "Points": Points,
                "Status": "Created"
            };

            jsonNomination = JSON.stringify(Nomination);
            SubmitNominationJSON(function (response) {
                // Parse JSON string into object
                var result = JSON.parse(response);
                BootstrapDialog.show({
                    message: $('<img src="assets/img/fisting.jpg" class="center-block" alt="Drawn Fist Fist Pump - Hang Loose@clipartmax.com">'),//'Your Nomination Has Been Submited For Review.',
                    type: BootstrapDialog.TYPE_SUCCESS,
                    title: 'SUCCESS: Your nomination has been submitted for review',
                    onhide: function (dialogRef) {
                        location.reload();
                    },
                    
                });
                
                
            });
        }));
    });

    function showdiv() {
        console.log("Show div called");
        window.open('http://hollardbot.eu-de.mybluemix.net/', 'Purple Bot', 'resizable,height=500,width=370'); return false;
    }
  

    function init() {

        getUsersJSON(function (response) {
            // Parse JSON string into object
            var userNames = JSON.parse(response);
            if (userNames != null) {
                userData = userNames;
                populateUserNameDropdown(userNames);
            }
        });
    }

    function getUsersJSON(callback) {

        uri = "http://hsshidevweb01/AgRest/Users?action=GetUsers";
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', uri, true); // Replace 'my_data' with the path to your file
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                callback(xobj.responseText);
               
            }
        };
        xobj.send(null);
    }

    //function SubmitNominationJSON() {

    //    SubmitNominationJSON(function (response) {
    //        // Parse JSON string into object
    //        var result = JSON.parse(response);
    //        if (result != null) {
    //            alert("sucess");
    //        }
    //    });
    //}

    function SubmitNominationJSON(callback) {

        var url = "http://hsshidevweb01/AgRest/addNom?action=Add";
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        xhr.overrideMimeType("application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                callback(xhr.responseText);
                //BootstrapDialog.show({
                //    type: BootstrapDialog.TYPE_SUCCESS,
                //    title: 'SUCCESS',
                //    message: 'Your Nomination Has Been Submited For Review.'
                //});
                
            }
        }
        var data = jsonNomination;
        xhr.send(data);
    }

    function populateUserNameDropdown(data) {
        $.each(data, function (i, option) {
            //$('#HolUserNames').append($('<option/>').attr("value", option.userId).text(option.firstName));
            let dropdown = document.getElementById('HolUserNames');
            dropdown.length = 0;

            let defaultOption = document.createElement('option');
            defaultOption.text = 'Please Select';

            dropdown.add(defaultOption);
            dropdown.selectedIndex = 0;
            for (let i = 0; i < data.length; i++) {
                if (data[i].Id != loggedInUserId) {
                    option = document.createElement('option');
                    option.text = data[i].FirstName + " " + data[i].Surname;
                    option.value = data[i].Id;
                    dropdown.add(option);
                }
            }
        });
    }
</script>

</html>
